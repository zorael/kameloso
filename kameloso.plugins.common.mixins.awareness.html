<!DOCTYPE html>
<html lang="en">
<head>
        <title>kameloso.plugins.common.mixins.awareness (kameloso.plugins.common.mixins.awareness)</title>
	<meta charset="utf-8" />
	<meta content="width=device-width, initial-scale=1" name="viewport" />
        <link href="style.css" rel="stylesheet" />
        <script src="script.js" type="text/javascript"></script>

	
	<link href="search-results.html" rel="prefetch" />
</head>
<body>
	<div id="page-header">
		<div id="logotype">
		<span>kameloso IRC bot</span>
		<nav>
			<a href="http://dlang.org/">Dlang.org</a>
		</nav>
		</div>

		<form action="search-docs.html" id="search">
			<input name="searchTerm" placeholder="Find a symbol name..." type="search" />
			<input type="submit" value="Go" />
		</form>
	</div>
	<div id="page-body">
		<div id="page-content">
		<h1>kameloso.plugins.common.mixins.awareness</h1><div class="breadcrumbs"><a class="breadcrumb" href="kameloso.html">kameloso</a> <a class="breadcrumb" href="kameloso.plugins.html">plugins</a> <a class="breadcrumb" href="kameloso.plugins.common.html">common</a> <a class="breadcrumb" href="kameloso.plugins.common.mixins.html">mixins</a> </div><div><div class="documentation-comment synopsis"><div><p>Awareness mixins, for plugins to mix in to extend behaviour and enjoy a
    considerable degree of automation.</p><p>These are used for plugins to mix in book-keeping of users and channels.</p></div></div></div><div class="annotated-prototype"></div><h2 id="members"><a class="header-anchor" href="#members">Members</a></h2><h3 class="member-list-header hide-from-toc" id="function"><a class="header-anchor" href="#function">Functions</a></h3><dl class="member-list native"><dt><a href="kameloso.plugins.common.mixins.awareness.ensureChannel.html">ensureChannel</a><div class="simplified-prototype" style="max-width: 69ch;"><span class="lang-feature">auto</span>  <span class="name">ensureChannel</span>(IRCPlugin plugin, IRCEvent.Channel channel)</div></dt><dd><div><p>Ensures a <a class="xref" href="dialect.defs.IRCChannel.html">IRCChannel</a> exists in the
    <a class="xref" href="kameloso.plugins.IRCPlugin.html">IRCPlugin</a>'s
    <a class="xref" href="kameloso.plugins.IRCPluginState.channels.html">IRCPluginState.channels</a> associative array.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onChannelAwarenessChannelModeIs.html">onChannelAwarenessChannelModeIs</a><div class="simplified-prototype" style="max-width: 77ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onChannelAwarenessChannelModeIs</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Adds the modes of a channel to a tracked channel's mode list.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onChannelAwarenessCreationTime.html">onChannelAwarenessCreationTime</a><div class="simplified-prototype" style="max-width: 75ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onChannelAwarenessCreationTime</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Stores the timestamp of when a channel was created.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onChannelAwarenessJoin.html">onChannelAwarenessJoin</a><div class="simplified-prototype" style="max-width: 67ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onChannelAwarenessJoin</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Adds a user as being part of a channel when they join it.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onChannelAwarenessMode.html">onChannelAwarenessMode</a><div class="simplified-prototype" style="max-width: 67ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onChannelAwarenessMode</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Sets a mode for a channel.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onChannelAwarenessModeLists.html">onChannelAwarenessModeLists</a><div class="simplified-prototype" style="max-width: 72ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onChannelAwarenessModeLists</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Adds users of a certain &quot;list&quot; mode to a tracked channel's list of modes
    (banlist, exceptlist, invitelist, etc).</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onChannelAwarenessNamesReply.html">onChannelAwarenessNamesReply</a><div class="simplified-prototype" style="max-width: 73ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onChannelAwarenessNamesReply</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Adds users as being part of a channel upon receiving the reply from the
    request for a list of all the participants.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onChannelAwarenessNick.html">onChannelAwarenessNick</a><div class="simplified-prototype" style="max-width: 67ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onChannelAwarenessNick</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Upon someone changing nickname, update their entry in the
    <a class="xref" href="kameloso.plugins.IRCPluginState.users.html">IRCPluginState.users</a></p><p>associative array to point to the new nickname.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onChannelAwarenessPart.html">onChannelAwarenessPart</a><div class="simplified-prototype" style="max-width: 67ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onChannelAwarenessPart</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Removes a user from being part of a channel when they leave it.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onChannelAwarenessQuit.html">onChannelAwarenessQuit</a><div class="simplified-prototype" style="max-width: 67ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onChannelAwarenessQuit</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Removes a user from all tracked channels if they disconnect.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onChannelAwarenessSelfjoin.html">onChannelAwarenessSelfjoin</a><div class="simplified-prototype" style="max-width: 71ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onChannelAwarenessSelfjoin</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Create a new <a class="xref" href="dialect.defs.IRCChannel.html">IRCChannel</a> in the the
    <a class="xref" href="kameloso.plugins.IRCPlugin.html">IRCPlugin</a>'s
    <a class="xref" href="kameloso.plugins.IRCPluginState.channels.html">IRCPluginState.channels</a></p><p>associative array when the bot joins a channel.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onChannelAwarenessSelfpart.html">onChannelAwarenessSelfpart</a><div class="simplified-prototype" style="max-width: 71ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onChannelAwarenessSelfpart</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Removes an <a class="xref" href="dialect.defs.IRCChannel.html">IRCChannel</a> from the internal list when the
    bot leaves it.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onChannelAwarenessTopic.html">onChannelAwarenessTopic</a><div class="simplified-prototype" style="max-width: 68ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onChannelAwarenessTopic</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Update the entry for an <a class="xref" href="dialect.defs.IRCChannel.html">IRCChannel</a> if someone changes
    the topic of it.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onChannelAwarenessWhoReply.html">onChannelAwarenessWhoReply</a><div class="simplified-prototype" style="max-width: 71ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onChannelAwarenessWhoReply</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Adds a user as being part of a channel upon receiving the reply from the
    request for info on all the participants.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onMinimalAuthenticationAccountInfoTarget.html">onMinimalAuthenticationAccountInfoTarget</a><div class="simplified-prototype" style="max-width: 86ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onMinimalAuthenticationAccountInfoTarget</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Replays any queued <a class="xref" href="kameloso.plugins.Replay.html">Replay</a>s awaiting the result
    of a WHOIS query. Before that, records the user's services account by
    saving it to the user's <a class="xref" href="dialect.defs.IRCClient.html">IRCClient</a> in the
    <a class="xref" href="kameloso.plugins.IRCPlugin.html">IRCPlugin</a>'s
    <a class="xref" href="kameloso.plugins.IRCPluginState.users.html">IRCPluginState.users</a> associative array.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onMinimalAuthenticationUnknownCommandWHOIS.html">onMinimalAuthenticationUnknownCommandWHOIS</a><div class="simplified-prototype" style="max-width: 89ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onMinimalAuthenticationUnknownCommandWHOIS</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Clears all queued <a class="xref" href="kameloso.plugins.Replay.html">Replay</a>s if the server
    says it doesn't support WHOIS at all.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onTwitchAwarenessCatchRoomID.html">onTwitchAwarenessCatchRoomID</a><div class="simplified-prototype" style="max-width: 73ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onTwitchAwarenessCatchRoomID</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Catches the room ID from a <tt class="inline-code">ROOMSTATE</tt> event.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onTwitchAwarenessDetectTargetModerator.html">onTwitchAwarenessDetectTargetModerator</a><div class="simplified-prototype" style="max-width: 84ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onTwitchAwarenessDetectTargetModerator</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Detects moderator-ness from a <tt class="inline-code">USERSTATE</tt> event. Broadcasters are also moderators.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onTwitchAwarenessUserCarrierImpl.html">onTwitchAwarenessUserCarrierImpl</a><div class="simplified-prototype" style="max-width: 126ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onTwitchAwarenessUserCarrierImpl</span>(IRCPlugin plugin, string channelName, IRCUser user, bool hasChannelAwareness)</div></dt><dd><div><p>Catch a user from normal Twitch events.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onUserAwarenessCatchTarget.html">onUserAwarenessCatchTarget</a><div class="simplified-prototype" style="max-width: 71ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onUserAwarenessCatchTarget</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Catches a user's information and saves it in the plugin's
    <a class="xref" href="kameloso.plugins.IRCPluginState.users.html">IRCPluginState.users</a></p><p>array of <a class="xref" href="dialect.defs.IRCUser.html">IRCUser</a>s.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onUserAwarenessEndOfList.html">onUserAwarenessEndOfList</a><div class="simplified-prototype" style="max-width: 69ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onUserAwarenessEndOfList</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Rehashes, or optimises, the <a class="xref" href="kameloso.plugins.IRCPlugin.html">IRCPlugin</a>'s
    <a class="xref" href="kameloso.plugins.IRCPluginState.users.html">IRCPluginState.users</a></p><p>associative array upon the end of a WHO or a NAMES list.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onUserAwarenessNamesReply.html">onUserAwarenessNamesReply</a><div class="simplified-prototype" style="max-width: 70ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onUserAwarenessNamesReply</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Catch users in a reply for the request for a NAMES list of all the
    participants in a channel.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onUserAwarenessNick.html">onUserAwarenessNick</a><div class="simplified-prototype" style="max-width: 63ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onUserAwarenessNick</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Upon someone changing nickname, update their entry in the
    <a class="xref" href="kameloso.plugins.IRCPlugin.html">IRCPlugin</a>'s
    <a class="xref" href="kameloso.plugins.IRCPluginState.users.html">IRCPluginState.users</a></p><p>array to point to the new nickname.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.onUserAwarenessQuit.html">onUserAwarenessQuit</a><div class="simplified-prototype" style="max-width: 63ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onUserAwarenessQuit</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Removes a user's <a class="xref" href="dialect.defs.IRCUser.html">IRCUser</a> entry from a plugin's user
    list upon them disconnecting.</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="mixin template"><a class="header-anchor" href="#mixin template">Mixin templates</a></h3><dl class="member-list native"><dt><a href="kameloso.plugins.common.mixins.awareness.ChannelAwareness.html">ChannelAwareness</a><div class="simplified-prototype" style="max-width: 157ch;"><span class="builtin-type">mixintemplate</span> <span class="name">ChannelAwareness</span><span class="template-params">(ChannelPolicy channelPolicy = ChannelPolicy.home, Flag!&quot;debug_&quot; debug_ = No.debug_, string module_ = __MODULE__)</span></div></dt><dd><div><p>Implements *channel awareness* in a plugin module.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.MinimalAuthentication.html">MinimalAuthentication</a><div class="simplified-prototype" style="max-width: 107ch;"><span class="builtin-type">mixintemplate</span> <span class="name">MinimalAuthentication</span><span class="template-params">(Flag!&quot;debug_&quot; debug_ = No.debug_, string module_ = __MODULE__)</span></div></dt><dd><div><p>Implements triggering of queued events in a plugin module, based on user details
    such as account or hostmask.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.TwitchAwareness.1.html">TwitchAwareness</a><div class="simplified-prototype" style="max-width: 156ch;"><span class="builtin-type">mixintemplate</span> <span class="name">TwitchAwareness</span><span class="template-params">(ChannelPolicy channelPolicy = ChannelPolicy.home, Flag!&quot;debug_&quot; debug_ = No.debug_, string module_ = __MODULE__)</span></div></dt><dd><div><span class="undocumented-note">Undocumented in source.</span></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.TwitchAwareness.2.html">TwitchAwareness</a><div class="simplified-prototype" style="max-width: 156ch;"><span class="builtin-type">mixintemplate</span> <span class="name">TwitchAwareness</span><span class="template-params">(ChannelPolicy channelPolicy = ChannelPolicy.home, Flag!&quot;debug_&quot; debug_ = No.debug_, string module_ = __MODULE__)</span></div></dt><dd><div><p>No-op mixin of version <tt class="inline-code">!TwitchSupport</tt> <a class="xref" href="kameloso.plugins.common.mixins.awareness.TwitchAwareness.2.html">TwitchAwareness</a>.</p></div></dd><dt><a href="kameloso.plugins.common.mixins.awareness.UserAwareness.html">UserAwareness</a><div class="simplified-prototype" style="max-width: 154ch;"><span class="builtin-type">mixintemplate</span> <span class="name">UserAwareness</span><span class="template-params">(ChannelPolicy channelPolicy = ChannelPolicy.home, Flag!&quot;debug_&quot; debug_ = No.debug_, string module_ = __MODULE__)</span></div></dt><dd><div><p>Implements *user awareness* in a plugin module.</p></div></dd></dl><div><h2 id="examples"><a class="header-anchor" href="#examples">Examples</a></h2><div class="documentation-comment"><div><pre class="d_code highlighted"><span class="kwrd">import</span> <span class="hid">kameloso</span>.<span class="hid">plugins</span>;
<span class="kwrd">import</span> <span class="hid">kameloso</span>.<span class="hid">plugins</span>.<span class="hid">common</span>.<span class="hid">mixins</span>.<span class="hid">awareness</span>;

@<span class="hid">Settings</span> <span class="kwrd">struct</span> <span class="hid">FooSettings</span> { <span class="com">/* ... */</span> }

@(<span class="hid">IRCEventHandler</span>()
    .<span class="hid">onEvent</span>(<span class="hid">IRCEvent</span>.<span class="hid">Type</span>.<span class="hid">CHAN</span>)
    .<span class="hid">permissionsRequired</span>(<span class="hid">Permissions</span>.<span class="hid">anyone</span>)
    .<span class="hid">channelPolicy</span>(<span class="hid">ChannelPolicy</span>.<span class="hid">home</span>)
    .<span class="hid">addCommand</span>(
        <span class="hid">IRCEventHandler</span>.<span class="hid">Command</span>()
            .<span class="hid">word</span>(<span class="str">&quot;foo&quot;</span>)
            .<span class="hid">policy</span>(<span class="hid">PrefixPolicy</span>.<span class="hid">prefixed</span>)
    )
)
<span class="type">void</span> <span class="hid">onFoo</span>(<span class="hid">FooPlugin</span> <span class="hid">plugin</span>, <span class="kwrd">const</span> <span class="hid">IRCEvent</span> <span class="hid">event</span>)
{
    <span class="com">// ...</span>
}

<span class="kwrd">mixin</span> <span class="hid">UserAwareness</span>;
<span class="kwrd">mixin</span> <span class="hid">ChannelAwareness</span>;

<span class="kwrd">final</span> <span class="kwrd">class</span> <span class="hid">FooPlugin</span> : <span class="hid">IRCPlugin</span>
{
    <span class="hid">FooSettings</span> <span class="hid">fooSettings</span>;

    <span class="com">// ...</span>

    <span class="kwrd">mixin</span> <span class="hid">IRCPluginImpl</span>;
}</pre></div></div><h2 id="see-also"><a class="header-anchor" href="#see-also">See Also</a></h2><div class="documentation-comment see-also-section"><div><p><a class="xref" href="kameloso.plugins.html">kameloso.plugins</a>,
        <a class="xref" href="kameloso.plugins.common.html">kameloso.plugins.common</a>,
        <a class="xref" href="kameloso.plugins.common.mixins.html">kameloso.plugins.common.mixins</a></p></div></div><h2 id="meta"><a class="header-anchor" href="#meta">Meta</a></h2><div class="documentation-comment license-section other-section"><h3 id="license"><a class="header-anchor" href="#license">License</a></h3><div><p><a href="https://www.boost.org/users/license.html">Boost Software License 1.0</a></p></div></div><div class="documentation-comment copyright-section other-section"><h3 id="copyright"><a class="header-anchor" href="#copyright">Copyright</a></h3><div><p><a href="https://github.com/zorael">JR</a></p></div></div><div class="documentation-comment authors-section other-section"><h3 id="authors"><a class="header-anchor" href="#authors">Authors</a></h3><div><p><a href="https://github.com/zorael">JR</a></p></div></div></div></div>
		<div id="page-nav"><a class="parent" href="kameloso.html">kameloso</a> <a class="parent" href="kameloso.plugins.html">plugins</a> <a class="parent" href="kameloso.plugins.common.html">common</a> <a class="parent" href="kameloso.plugins.common.mixins.html">mixins</a> 
		<span class="type-separator">modules</span><ul><li><a class="module current" href="kameloso.plugins.common.mixins.awareness.html">awareness</a></li></ul><span class="type-separator">mixin templates</span><ul><li><a class="mixin-template" href="kameloso.plugins.common.mixins.MessagingProxy.html">MessagingProxy</a></li><li><a class="mixin-template" href="kameloso.plugins.common.mixins.WHOISFiberDelegate.html">WHOISFiberDelegate</a></li></ul></div>
	</div>
	<div id="page-footer">Page generated by <a href="https://github.com/adamdruppe/adrdox">adrdox</a></div>
</body>
</html>