<!DOCTYPE html>
<html lang="en">
<head>
        <title>WHOISFiberDelegate (kameloso.plugins.common.mixins.WHOISFiberDelegate)</title>
	<meta charset="utf-8" />
	<meta content="width=device-width, initial-scale=1" name="viewport" />
        <link href="style.css" rel="stylesheet" />
        <script src="script.js" type="text/javascript"></script>

	
	<link href="search-results.html" rel="prefetch" />
</head>
<body>
	<div id="page-header">
		<div id="logotype">
		<span>kameloso IRC bot</span>
		<nav>
			<a href="http://dlang.org/">Dlang.org</a>
		</nav>
		</div>

		<form action="search-docs.html" id="search">
			<input name="searchTerm" placeholder="Find a symbol name..." type="search" />
			<input type="submit" value="Go" />
		</form>
	</div>
	<div id="page-body">
		<div id="page-content">
		<h1>WHOISFiberDelegate</h1><div class="breadcrumbs"><a class="breadcrumb" href="kameloso.html">kameloso</a> <a class="breadcrumb" href="kameloso.plugins.html">plugins</a> <a class="breadcrumb" href="kameloso.plugins.common.html">common</a> <a class="breadcrumb" href="kameloso.plugins.common.mixins.html">mixins</a> </div><div><div class="documentation-comment synopsis"><div><p>Functionality for catching WHOIS results and calling passed function aliases
    with the resulting account information that was divined from it, in the form
    of the actual <a class="xref" href="dialect.defs.IRCEvent.html">IRCEvent</a>, the target
    <a class="xref" href="dialect.defs.IRCUser.html">IRCUser</a> within it, the user's <tt class="inline-code">account</tt> field, or merely
    alone as an arity-0 function.</p><p>The mixed in function to call is named <tt class="inline-code">enqueueAndWHOIS</tt>. It will construct
    the fiber, enqueue it as awaiting the proper IRCEvent types, and issue the
    WHOIS query.</p></div></div></div><div class="annotated-prototype"><div class="aggregate-prototype"><div class="attributes"></div><span class="builtin-type">mixin template</span> WHOISFiberDelegate (<div class="parameters-list toplevel"><div class="template-parameter-item parameter-item">	<span><a class="lang-feature" href="http://dpldocs.info/template-alias-parameter">alias</a> <span class="name" data-ident="onSuccess">onSuccess</span></span></div><div class="template-parameter-item parameter-item">	<span><a class="lang-feature" href="http://dpldocs.info/template-alias-parameter">alias</a> <span class="name" data-ident="onFailure">onFailure</span> = null</span></div><div class="template-parameter-item parameter-item">	<span><span class="name" data-ident="Flag">Flag</span>!&quot;alwaysLookup&quot; <span class="name" data-ident="alwaysLookup">alwaysLookup</span> = <span class="name" data-ident="No">No</span>.<span class="name" data-ident="alwaysLookup">alwaysLookup</span></span></div></div>) {<div class="aggregate-member"><a href="kameloso.plugins.IRCPlugin.html"><span class="builtin-type">class</span> <span class="name">IRCPlugin</span> via <tt class="highlighted">
<span class="kwrd">import</span> <span class="hid">kameloso</span>.<span class="hid">plugins</span> : <span class="hid">IRCPlugin</span>;</tt>;</a></div><div class="aggregate-member"><div class="attributes"></div><span class="builtin-type">enum</span> <span class="name">parentFunction</span>;</div><div class="aggregate-member"><div class="attributes"><div class="uda"><span><span class="lang-feature">static if</span>(<span>!isSomeFunction!onSuccess</span>)</span></div></div><span class="builtin-type">enum</span> <span class="name">pattern</span>;</div><div class="aggregate-member"><div class="attributes"><div class="uda"><span><span class="lang-feature">static if</span>(<span>!isSomeFunction!onSuccess</span>)</span></div></div><span class="builtin-type">enum</span> <span class="name">message</span>;</div><div class="aggregate-member"><div class="attributes"><div class="uda"><span><span class="lang-feature">static if</span>(!(<span>!isSomeFunction!onSuccess</span>))</span></div><div class="uda"><span><span class="lang-feature">static if</span>(<span>!isSomeFunction!onFailure &amp;&amp; !is(typeof(onFailure) == typeof(null))</span>)</span></div></div><span class="builtin-type">enum</span> <span class="name">pattern</span>;</div><div class="aggregate-member"><div class="attributes"><div class="uda"><span><span class="lang-feature">static if</span>(!(<span>!isSomeFunction!onSuccess</span>))</span></div><div class="uda"><span><span class="lang-feature">static if</span>(<span>!isSomeFunction!onFailure &amp;&amp; !is(typeof(onFailure) == typeof(null))</span>)</span></div></div><span class="builtin-type">enum</span> <span class="name">message</span>;</div><div class="aggregate-member"><a href="lu.traits.MixinConstraints.html"><span class="builtin-type">mixintemplate</span> <span class="name">MixinConstraints</span><span class="template-params">(MixinScope mixinScope, string mixinName = &quot;a constrained mixin&quot;)</span> via <tt class="highlighted">
<span class="kwrd">import</span> <span class="hid">lu</span>.<span class="hid">traits</span> : <span class="hid">MixinConstraints</span>, <span class="hid">MixinScope</span>;</tt>;</a></div><div class="aggregate-member"><a href="lu.traits.MixinScope.html"><span class="builtin-type">enum</span> <span class="name">MixinScope</span> via <tt class="highlighted">
<span class="kwrd">import</span> <span class="hid">lu</span>.<span class="hid">traits</span> : <span class="hid">MixinConstraints</span>, <span class="hid">MixinScope</span>;</tt>;</a></div><div class="aggregate-member"><div class="attributes"><div class="uda"><span><span class="lang-feature">static if</span>(<span>(paramNames.length == 0) || !is(typeof(mixin (paramNames[0])) : IRCPlugin)</span>)</span></div></div><span class="builtin-type">enum</span> <span class="name">pattern</span>;</div><div class="aggregate-member"><div class="attributes"><div class="uda"><span><span class="lang-feature">static if</span>(<span>(paramNames.length == 0) || !is(typeof(mixin (paramNames[0])) : IRCPlugin)</span>)</span></div></div><span class="builtin-type">enum</span> <span class="name">message</span>;</div><div class="aggregate-member"><a href="kameloso.plugins.common.mixins.WHOISFiberDelegate.hasWHOISFiber.html"><div class="attributes"></div><span class="builtin-type">enum</span> <span class="name">hasWHOISFiber</span>;</a></div><div class="aggregate-member"><a href="kameloso.plugins.common.mixins.WHOISFiberDelegate._carriedNickname.html"><div class="attributes"></div><tt class="highlighted"><span class="type">string</span></tt> <span class="name">_carriedNickname</span>;</a></div><div class="aggregate-member"><a href="kameloso.plugins.common.mixins.WHOISFiberDelegate.whoisEventTypes.html"><div class="attributes">static immutable </div><tt class="highlighted"><span class="hid">IRCEvent</span>.<span class="hid">Type</span>[<span class="num">6</span>]</tt> <span class="name">whoisEventTypes</span>;</a></div><div class="aggregate-member"><a href="kameloso.plugins.common.mixins.WHOISFiberDelegate.whoisFiberDelegate.html"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">whoisFiberDelegate</span>();</a></div><div class="aggregate-member"><a href="kameloso.plugins.common.mixins.WHOISFiberDelegate.enqueueAndWHOIS.html"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">enqueueAndWHOIS</span>(string nickname, bool issueWhois, bool background);</a></div>}</div></div><h2 id="members"><a class="header-anchor" href="#members">Members</a></h2><h3 class="member-list-header hide-from-toc" id="function"><a class="header-anchor" href="#function">Functions</a></h3><dl class="member-list native"><dt><a href="kameloso.plugins.common.mixins.WHOISFiberDelegate.enqueueAndWHOIS.html">enqueueAndWHOIS</a><div class="simplified-prototype" style="max-width: 78ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">enqueueAndWHOIS</span>(string nickname, bool issueWhois, bool background)</div></dt><dd><div><p>Constructs a <a class="xref" href="kameloso.thread.CarryingFiber.html">CarryingFiber</a> carrying a
        <a class="xref" href="dialect.defs.IRCEvent.html">IRCEvent</a> and enqueues it into the
        <a class="xref" href="kameloso.plugins.IRCPluginState.awaitingFibers.html">IRCPluginState.awaitingFibers</a></p><p>associative array, then issues a WHOIS query (unless overridden via
        the <tt class="inline-code">issueWhois</tt> parameter).</p></div></dd><dt><a href="kameloso.plugins.common.mixins.WHOISFiberDelegate.whoisFiberDelegate.html">whoisFiberDelegate</a><div class="simplified-prototype" style="max-width: 27ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">whoisFiberDelegate</span>()</div></dt><dd><div><p>Reusable mixin that catches WHOIS results.</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="manifest constant"><a class="header-anchor" href="#manifest constant">Manifest constants</a></h3><dl class="member-list native"><dt><a href="kameloso.plugins.common.mixins.WHOISFiberDelegate.hasWHOISFiber.html">hasWHOISFiber</a><div class="simplified-prototype" style="max-width: 20ch;"><span class="builtin-type">enum</span> <span class="name">hasWHOISFiber</span>;</div></dt><dd><div><p>Constant denoting that <a class="xref" href="kameloso.plugins.common.mixins.WHOISFiberDelegate.html">WHOISFiberDelegate</a> has been mixed in.</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="static variable"><a class="header-anchor" href="#static variable">Static variables</a></h3><dl class="member-list native"><dt><a href="kameloso.plugins.common.mixins.WHOISFiberDelegate.whoisEventTypes.html">whoisEventTypes</a><div class="simplified-prototype" style="max-width: 36ch;"><tt class="highlighted"><span class="hid">IRCEvent</span>.<span class="hid">Type</span>[<span class="num">6</span>]</tt> <span class="name">whoisEventTypes</span>;</div></dt><dd><div><p>Event types that we may encounter as responses to WHOIS queries.</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="variable"><a class="header-anchor" href="#variable">Variables</a></h3><dl class="member-list native"><dt><a href="kameloso.plugins.common.mixins.WHOISFiberDelegate._carriedNickname.html">_carriedNickname</a><div class="simplified-prototype" style="max-width: 26ch;"><tt class="highlighted"><span class="type">string</span></tt> <span class="name">_carriedNickname</span>;</div></dt><dd><div><p>Nickname being looked up, stored outside of any separate function to make
        it available to all of them.</p></div></dd></dl><div><h2 id="parameters"><a class="header-anchor" href="#parameters">Parameters</a></h2><dl class="parameter-descriptions"><dt id="param-onSuccess"><a class="parameter-name" data-ident="onSuccess" href="#param-onSuccess">onSuccess</a></dt><dd><div class="documentation-comment"><div><p>Function alias to call when successfully having received
            account information from the server's WHOIS response.</p></div></div></dd><dt id="param-onFailure"><a class="parameter-name" data-ident="onFailure" href="#param-onFailure">onFailure</a></dt><dd><div class="documentation-comment"><div><p>Function alias to call when the server didn't respond with
            account information, or when the user is offline.</p></div></div></dd><dt id="param-alwaysLookup"><a class="parameter-name" data-ident="alwaysLookup" href="#param-alwaysLookup">alwaysLookup</a></dt><dd><div class="documentation-comment"><div><p>Whether or not to always issue a WHOIS query, even if
            the requested user's account is already known.</p></div></div></dd></dl><h2 id="examples"><a class="header-anchor" href="#examples">Examples</a></h2><div class="documentation-comment"><div><pre class="d_code highlighted"><span class="type">void</span> <span class="hid">onSuccess</span>(<span class="kwrd">const</span> <span class="hid">IRCEvent</span> <span class="hid">successEvent</span>) { <span class="com">/* ... */</span> }
<span class="type">void</span> <span class="hid">onFailure</span>(<span class="kwrd">const</span> <span class="hid">IRCUser</span> <span class="hid">failureUser</span>) { <span class="com">/* .. */</span> }

<span class="kwrd">mixin</span> <span class="hid">WHOISFiberDelegate</span>!(<span class="hid">onSuccess</span>, <span class="hid">onFailure</span>);
<span class="hid">enqueueAndWHOIS</span>(<span class="hid">specifiedNickname</span>);</pre></div></div></div></div>
		<div id="page-nav"><a class="parent" href="kameloso.html">kameloso</a> <a class="parent" href="kameloso.plugins.html">plugins</a> <a class="parent" href="kameloso.plugins.common.html">common</a> <a class="parent" href="kameloso.plugins.common.mixins.html">mixins</a> 
		<span class="type-separator">modules</span><ul><li><a class="module" href="kameloso.plugins.common.mixins.awareness.html">awareness</a></li></ul><span class="type-separator">mixin templates</span><ul><li><a class="mixin-template" href="kameloso.plugins.common.mixins.MessagingProxy.html">MessagingProxy</a></li><li><a class="mixin-template current" href="kameloso.plugins.common.mixins.WHOISFiberDelegate.html">WHOISFiberDelegate</a></li></ul></div>
	</div>
	<div id="page-footer">Page generated by <a href="https://github.com/adamdruppe/adrdox">adrdox</a></div>
</body>
</html>