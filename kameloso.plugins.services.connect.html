<!DOCTYPE html>
<html lang="en">
<head>
        <title>kameloso.plugins.services.connect (kameloso.plugins.services.connect)</title>
	<meta charset="utf-8" />
	<meta content="width=device-width, initial-scale=1" name="viewport" />
        <link href="style.css" rel="stylesheet" />
        <script src="script.js" type="text/javascript"></script>

	
	<link href="search-results.html" rel="prefetch" />
</head>
<body>
	<div id="page-header">
		<div id="logotype">
		<span>kameloso IRC bot</span>
		<nav>
			<a href="http://dlang.org/">Dlang.org</a>
		</nav>
		</div>

		<form action="search-docs.html" id="search">
			<input name="searchTerm" placeholder="Find a symbol name..." type="search" />
			<input type="submit" value="Go" />
		</form>
	</div>
	<div id="page-body">
		<div id="page-content">
		<h1>kameloso.plugins.services.connect</h1><div class="breadcrumbs"><a class="breadcrumb" href="kameloso.html">kameloso</a> <a class="breadcrumb" href="kameloso.plugins.html">plugins</a> <a class="breadcrumb" href="kameloso.plugins.services.html">services</a> </div><div><div class="documentation-comment synopsis"><div><p>The Connect service handles logging onto IRC servers after having connected,
    as well as managing authentication to services. It also manages responding
    to <a class="xref" href="dialect.defs.IRCEvent.Type.html#PING">PING</a> requests, and capability negotiations.</p><p>The actual connection logic is in the <a class="xref" href="kameloso.net.html">kameloso.net</a> module.</p></div></div></div><div class="annotated-prototype"></div><h2 id="members"><a class="header-anchor" href="#members">Members</a></h2><h3 class="member-list-header hide-from-toc" id="alias"><a class="header-anchor" href="#alias">Aliases</a></h3><dl class="member-list native"><dt><a href="kameloso.plugins.services.connect.ChannelRejoinBehaviour.html">ChannelRejoinBehaviour</a><div class="simplified-prototype" style="max-width: 40ch;"><span class="builtin-type">alias</span> <span class="name">ChannelRejoinBehaviour</span> = <tt class="highlighted"><span class="hid">Rejoin</span></tt></div></dt><dd><div><p>More descriptive name for <a class="xref" href="kameloso.plugins.services.connect.Rejoin.html">Rejoin</a>.</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="class"><a class="header-anchor" href="#class">Classes</a></h3><dl class="member-list native"><dt><a href="kameloso.plugins.services.connect.ConnectService.html">ConnectService</a><div class="simplified-prototype" style="max-width: 22ch;"><span class="builtin-type">class</span> <span class="name">ConnectService</span></div></dt><dd><div><p>The Connect service is a collection of functions and state needed to connect
    and stay connected to an IRC server, as well as authenticate with services.</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="enum"><a class="header-anchor" href="#enum">Enums</a></h3><dl class="member-list native"><dt><a href="kameloso.plugins.services.connect.Progress.html">Progress</a><div class="simplified-prototype" style="max-width: 14ch;"><span class="builtin-type">enum</span> <span class="name">Progress</span></div></dt><dd><div><p>Progress of a process.</p></div></dd><dt><a href="kameloso.plugins.services.connect.Rejoin.html">Rejoin</a><div class="simplified-prototype" style="max-width: 12ch;"><span class="builtin-type">enum</span> <span class="name">Rejoin</span></div></dt><dd><div><p>Manners in which ways channels should be rejoined upon reconnecting,
    or upon re-execution.</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="function"><a class="header-anchor" href="#function">Functions</a></h3><dl class="member-list native"><dt><a href="kameloso.plugins.services.connect.joinChannels.html">joinChannels</a><div class="simplified-prototype" style="max-width: 45ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">joinChannels</span>(ConnectService service)</div></dt><dd><div><p>Joins all channels that should be joined, as per the <a class="xref" href="kameloso.plugins.services.connect.ConnectSettings.rejoinBehaviour.html">ConnectSettings.rejoinBehaviour</a>
    setting.</p></div></dd><dt><a href="kameloso.plugins.services.connect.negotiateNick.html">negotiateNick</a><div class="simplified-prototype" style="max-width: 46ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">negotiateNick</span>(ConnectService service)</div></dt><dd><div><p>Negotiate nickname and user with the server, during registration.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onAuthEnd.html">onAuthEnd</a><div class="simplified-prototype" style="max-width: 55ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onAuthEnd</span>(ConnectService service, IRCEvent _)</div></dt><dd><div><p>Flags authentication as finished and join channels.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onBadNick.html">onBadNick</a><div class="simplified-prototype" style="max-width: 55ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onBadNick</span>(ConnectService service, IRCEvent _)</div></dt><dd><div><p>Aborts a registration attempt and quits if the requested nickname is too
    long or contains invalid characters.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onBanned.html">onBanned</a><div class="simplified-prototype" style="max-width: 40ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onBanned</span>(ConnectService service)</div></dt><dd><div><p>Quits the program if we're banned.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onBannedFromChan.html">onBannedFromChan</a><div class="simplified-prototype" style="max-width: 67ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onBannedFromChan</span>(ConnectService service, IRCEvent event)</div></dt><dd><div><p>Records us as having failed to join a channel, when we are banned from it.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onBusMessage.html">onBusMessage</a><div class="simplified-prototype" style="max-width: 81ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onBusMessage</span>(ConnectService service, string header, Sendable content)</div></dt><dd><div><p>Receives a passed <a class="xref" href="kameloso.thread.Boxed.html">Boxed</a> instance with the &quot;<tt class="inline-code">connect</tt>&quot; header,
    and calls functions based on the payload message.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onCapabilityNegotiation.html">onCapabilityNegotiation</a><div class="simplified-prototype" style="max-width: 74ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onCapabilityNegotiation</span>(ConnectService service, IRCEvent event)</div></dt><dd><div><p>Handles server capability exchange.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onEndOfMOTD.html">onEndOfMOTD</a><div class="simplified-prototype" style="max-width: 57ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onEndOfMOTD</span>(ConnectService service, IRCEvent _)</div></dt><dd><div><p>Joins channels and prints some Twitch warnings on end of MOTD.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onISUPPORT.html">onISUPPORT</a><div class="simplified-prototype" style="max-width: 60ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onISUPPORT</span>(ConnectService service, IRCEvent event)</div></dt><dd><div><p>Requests a UTF-8 codepage if it seems that the server supports changing such.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onInvite.html">onInvite</a><div class="simplified-prototype" style="max-width: 58ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onInvite</span>(ConnectService service, IRCEvent event)</div></dt><dd><div><p>Upon being invited to a channel, joins it if the settings say we should.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onNickInUse.html">onNickInUse</a><div class="simplified-prototype" style="max-width: 57ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onNickInUse</span>(ConnectService service, IRCEvent _)</div></dt><dd><div><p>Modifies the nickname by appending characters to the end of it.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onPassMismatch.html">onPassMismatch</a><div class="simplified-prototype" style="max-width: 47ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onPassMismatch</span>(ConnectService service)</div></dt><dd><div><p>Quits the program if we supplied a bad <a class="xref" href="kameloso.pods.IRCBot.pass.html">IRCBot.pass</a>.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onPing.html">onPing</a><div class="simplified-prototype" style="max-width: 56ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onPing</span>(ConnectService service, IRCEvent event)</div></dt><dd><div><p>Pongs the server upon <a class="xref" href="dialect.defs.IRCEvent.Type.html#PING">PING</a>.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onQuit.html">onQuit</a><div class="simplified-prototype" style="max-width: 56ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onQuit</span>(ConnectService service, IRCEvent event)</div></dt><dd><div><p>Regains nickname if the holder of the one we wanted during registration quit.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onReconnect.html">onReconnect</a><div class="simplified-prototype" style="max-width: 57ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onReconnect</span>(ConnectService service, IRCEvent _)</div></dt><dd><div><p>Disconnects and reconnects to the server.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onSASLAuthenticate.html">onSASLAuthenticate</a><div class="simplified-prototype" style="max-width: 64ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onSASLAuthenticate</span>(ConnectService service, IRCEvent _)</div></dt><dd><div><p>Attempts to authenticate via SASL, with the EXTERNAL mechanism if a private
    key and/or certificate is set in the configuration file, and by PLAIN otherwise.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onSASLFailure.html">onSASLFailure</a><div class="simplified-prototype" style="max-width: 59ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onSASLFailure</span>(ConnectService service, IRCEvent _)</div></dt><dd><div><p>On SASL authentication failure, calls a <tt class="inline-code">CAP END</tt> to finish the
    <a class="xref" href="dialect.defs.IRCEvent.Type.html#CAP">CAP</a> negotiations and finish registration.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onSASLFailureImpl.html">onSASLFailureImpl</a><div class="simplified-prototype" style="max-width: 50ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onSASLFailureImpl</span>(ConnectService service)</div></dt><dd><div><p>On SASL authentication failure, calls a <tt class="inline-code">CAP END</tt> to finish the
    <a class="xref" href="dialect.defs.IRCEvent.Type.html#CAP">CAP</a> negotiations and finish registration.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onSASLSuccess.html">onSASLSuccess</a><div class="simplified-prototype" style="max-width: 59ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onSASLSuccess</span>(ConnectService service, IRCEvent _)</div></dt><dd><div><p>On SASL authentication success, calls a <tt class="inline-code">CAP END</tt> to finish the
    <a class="xref" href="dialect.defs.IRCEvent.Type.html#CAP">CAP</a> negotiations.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onSelfjoin.html">onSelfjoin</a><div class="simplified-prototype" style="max-width: 60ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onSelfjoin</span>(ConnectService service, IRCEvent event)</div></dt><dd><div><p>Records us as having joined a channel, when we join one. This is to allow
    us to notice when we silently fail to join something, on Twitch. As it's
    limited to there, gate it behind version <tt class="inline-code">TwitchSupport</tt>.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onSelfnickSuccessOrFailure.html">onSelfnickSuccessOrFailure</a><div class="simplified-prototype" style="max-width: 73ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onSelfnickSuccessOrFailure</span>(ConnectService service, IRCEvent _)</div></dt><dd><div><p>Resets <a class="xref" href="kameloso.plugins.printer.PrinterPlugin.html">PrinterPlugin</a> squelching upon a
    successful or failed nick change. This so as to be squelching as little as possible.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onSelfpart.html">onSelfpart</a><div class="simplified-prototype" style="max-width: 60ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onSelfpart</span>(ConnectService service, IRCEvent event)</div></dt><dd><div><p>Removes a channel from the list of joined channels.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onToConnectType.html">onToConnectType</a><div class="simplified-prototype" style="max-width: 66ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onToConnectType</span>(ConnectService service, IRCEvent event)</div></dt><dd><div><p>Responds to <a class="xref" href="dialect.defs.IRCEvent.Type.html#ERR_NEEDPONG">ERR_NEEDPONG</a> events by sending
    the text supplied as content in the <a class="xref" href="dialect.defs.IRCEvent.html">IRCEvent</a> to the server.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onTwitchAuthFailure.html">onTwitchAuthFailure</a><div class="simplified-prototype" style="max-width: 70ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onTwitchAuthFailure</span>(ConnectService service, IRCEvent event)</div></dt><dd><div><p>On Twitch, if the OAuth pass is wrong or malformed, abort and exit the program.
    Only deal with it if we're currently registering.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onUnknownCommand.html">onUnknownCommand</a><div class="simplified-prototype" style="max-width: 67ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onUnknownCommand</span>(ConnectService service, IRCEvent event)</div></dt><dd><div><p>Warns the user if the server does not seem to support WHOIS queries, suggesting
    that they enable hostmasks mode instead.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onWHOISUser.html">onWHOISUser</a><div class="simplified-prototype" style="max-width: 61ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onWHOISUser</span>(ConnectService service, IRCEvent event)</div></dt><dd><div><p>Catch information about ourselves (notably our <tt class="inline-code">IDENT</tt>) from <tt class="inline-code">WHOIS</tt> results.</p></div></dd><dt><a href="kameloso.plugins.services.connect.onWelcome.html">onWelcome</a><div class="simplified-prototype" style="max-width: 59ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">onWelcome</span>(ConnectService service, IRCEvent event)</div></dt><dd><div><p>Marks registration as completed upon <a class="xref" href="dialect.defs.IRCEvent.Type.html#RPL_WELCOME">RPL_WELCOME</a>
    (numeric <tt class="inline-code">001</tt>).</p></div></dd><dt><a href="kameloso.plugins.services.connect.register.html">register</a><div class="simplified-prototype" style="max-width: 40ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">register</span>(ConnectService service)</div></dt><dd><div><p>Registers with/logs onto an IRC server.</p></div></dd><dt><a href="kameloso.plugins.services.connect.setup.html">setup</a><div class="simplified-prototype" style="max-width: 37ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">setup</span>(ConnectService service)</div></dt><dd><div><p>Registers with the server.</p></div></dd><dt><a href="kameloso.plugins.services.connect.startPingMonitor.html">startPingMonitor</a><div class="simplified-prototype" style="max-width: 49ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">startPingMonitor</span>(ConnectService service)</div></dt><dd><div><p>Starts a looping monitor that sends a <a class="xref" href="dialect.defs.IRCEvent.Type.html#PING">PING</a>
    if we haven't received one from the server for a while. This is to ensure
    that dead connections are properly detected.</p></div></dd><dt><a href="kameloso.plugins.services.connect.tryAuth.html">tryAuth</a><div class="simplified-prototype" style="max-width: 39ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">tryAuth</span>(ConnectService service)</div></dt><dd><div><p>Tries to authenticate with services.</p></div></dd><dt><a href="kameloso.plugins.services.connect.trySASLPlain.html">trySASLPlain</a><div class="simplified-prototype" style="max-width: 46ch;"><span class="lang-feature">auto</span>  <span class="name">trySASLPlain</span>(ConnectService service)</div></dt><dd><div><p>Constructs a SASL plain authentication token from the bot's
    <a class="xref" href="kameloso.pods.IRCBot.account.html">IRCBot.account</a> and
    <a class="xref" href="kameloso.pods.IRCBot.password.html">IRCBot.password</a>,
    then sends it to the server, during registration.</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="struct"><a class="header-anchor" href="#struct">Structs</a></h3><dl class="member-list native"><dt><a href="kameloso.plugins.services.connect.ConnectSettings.html">ConnectSettings</a><div class="simplified-prototype" style="max-width: 24ch;"><span class="builtin-type">struct</span> <span class="name">ConnectSettings</span></div></dt><dd><div><p>Settings for a <a class="xref" href="kameloso.plugins.services.connect.ConnectService.html">ConnectService</a>.</p></div></dd></dl><div><h2 id="see-also"><a class="header-anchor" href="#see-also">See Also</a></h2><div class="documentation-comment see-also-section"><div><p><a class="xref" href="kameloso.net.html">kameloso.net</a>,
        <a class="xref" href="kameloso.plugins.html">kameloso.plugins</a>,
        <a class="xref" href="kameloso.plugins.common.html">kameloso.plugins.common</a></p></div></div><h2 id="meta"><a class="header-anchor" href="#meta">Meta</a></h2><div class="documentation-comment license-section other-section"><h3 id="license"><a class="header-anchor" href="#license">License</a></h3><div><p><a href="https://www.boost.org/users/license.html">Boost Software License 1.0</a></p></div></div><div class="documentation-comment copyright-section other-section"><h3 id="copyright"><a class="header-anchor" href="#copyright">Copyright</a></h3><div><p><a href="https://github.com/zorael">JR</a></p></div></div><div class="documentation-comment authors-section other-section"><h3 id="authors"><a class="header-anchor" href="#authors">Authors</a></h3><div><p><a href="https://github.com/zorael">JR</a></p></div></div></div></div>
		<div id="page-nav"><a class="parent" href="kameloso.html">kameloso</a> <a class="parent" href="kameloso.plugins.html">plugins</a> <a class="parent" href="kameloso.plugins.services.html">services</a> 
		<span class="type-separator">modules</span><ul><li><a class="module" href="kameloso.plugins.services.chanquery.html">chanquery</a></li><li><a class="module current" href="kameloso.plugins.services.connect.html">connect</a></li><li><a class="module" href="kameloso.plugins.services.ctcp.html">ctcp</a></li><li><a class="module" href="kameloso.plugins.services.persistence.html">persistence</a></li></ul></div>
	</div>
	<div id="page-footer">Page generated by <a href="https://github.com/adamdruppe/adrdox">adrdox</a></div>
</body>
</html>