<!DOCTYPE html>
<html lang="en">
<head>
        <title>kameloso.main (kameloso.main)</title>
	<meta charset="utf-8" />
	<meta content="width=device-width, initial-scale=1" name="viewport" />
        <link href="style.css" rel="stylesheet" />
        <script src="script.js" type="text/javascript"></script>

	
	<link href="search-results.html" rel="prefetch" />
</head>
<body>
	<div id="page-header">
		<div id="logotype">
		<span>kameloso IRC bot</span>
		<nav>
			<a href="http://dlang.org/">Dlang.org</a>
		</nav>
		</div>

		<form action="search-docs.html" id="search">
			<input name="searchTerm" placeholder="Find a symbol name..." type="search" />
			<input type="submit" value="Go" />
		</form>
	</div>
	<div id="page-body">
		<div id="page-content">
		<h1>kameloso.main</h1><div class="breadcrumbs"><a class="breadcrumb" href="kameloso.html">kameloso</a> </div><div><div class="documentation-comment synopsis"><div><p>The main module, housing startup logic and the main event loop.</p><p>No module (save <a class="xref" href="kameloso.entrypoint.html">kameloso.entrypoint</a>) should be importing this.</p></div></div></div><div class="annotated-prototype"></div><h2 id="members"><a class="header-anchor" href="#members">Members</a></h2><h3 class="member-list-header hide-from-toc" id="function"><a class="header-anchor" href="#function">Functions</a></h3><dl class="member-list native"><dt><a href="kameloso.main.checkInitialisationMessages.html">checkInitialisationMessages</a><div class="simplified-prototype" style="max-width: 84ch;"><span class="lang-feature">auto</span>  <span class="name">checkInitialisationMessages</span>(Kameloso instance, ShellReturnValue retval)</div></dt><dd><div><p>Checks for any initialisation messages that may have been sent by plugins
    during their initialisation.</p></div></dd><dt><a href="kameloso.main.echoQuitMessage.html">echoQuitMessage</a><div class="simplified-prototype" style="max-width: 59ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">echoQuitMessage</span>(Kameloso instance, string reason)</div></dt><dd><div><p>Echos the quit message to the local terminal, to fake it being sent verbosely
    to the server. It is sent, but later, bypassing the message fiber which would
    otherwise do the echoing.</p></div></dd><dt><a href="kameloso.main.listenAttemptToNext.html">listenAttemptToNext</a><div class="simplified-prototype" style="max-width: 73ch;"><span class="lang-feature">auto</span>  <span class="name">listenAttemptToNext</span>(Kameloso instance, ListenAttempt attempt)</div></dt><dd><div><p>Translates the <a class="xref" href="kameloso.net.ListenAttempt.html#State">ListenAttempt.State</a>
    received from a <a class="xref" href="std.concurrency.Generator.html">Generator</a> into a <a class="xref" href="lu.misc.Next.html">Next</a>,
    while also providing warnings and error messages.</p></div></dd><dt><a href="kameloso.main.logPluginActionException.html">logPluginActionException</a><div class="simplified-prototype" style="max-width: 100ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">logPluginActionException</span>(Exception base, IRCPlugin plugin, IRCEvent event, string fun)</div></dt><dd><div><p>Logs an exception thrown by a plugin action.</p></div></dd><dt><a href="kameloso.main.mainLoop.html">mainLoop</a><div class="simplified-prototype" style="max-width: 36ch;"><span class="lang-feature">auto</span>  <span class="name">mainLoop</span>(Kameloso instance)</div></dt><dd><div><p>This loops creates a <a class="xref" href="std.concurrency.Generator.html">Generator</a>
    <a class="xref" href="core.thread.fiber.Fiber.html">Fiber</a> to loop over the connected <a class="xref" href="std.socket.Socket.html">Socket</a>.</p></div></dd><dt><a href="kameloso.main.postInstanceSetup.html">postInstanceSetup</a><div class="simplified-prototype" style="max-width: 26ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">postInstanceSetup</span>()</div></dt><dd><div><p>Sets up the program (terminal) environment.</p></div></dd><dt><a href="kameloso.main.prettyprintStartScreen.html">prettyprintStartScreen</a><div class="simplified-prototype" style="max-width: 64ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">prettyprintStartScreen</span>(Kameloso instance, string arg0)</div></dt><dd><div><p>Prints a pretty start screen.</p></div></dd><dt><a href="kameloso.main.printEventDebugDetails.html">printEventDebugDetails</a><div class="simplified-prototype" style="max-width: 89ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">printEventDebugDetails</span>(IRCEvent event, string raw, bool eventWasInitialised)</div></dt><dd><div><p>Print what we know about an event, from an error perspective.</p></div></dd><dt><a href="kameloso.main.printSummary.html">printSummary</a><div class="simplified-prototype" style="max-width: 39ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">printSummary</span>(Kameloso instance)</div></dt><dd><div><p>Prints a summary of the connection(s) made and events parsed this execution.</p></div></dd><dt><a href="kameloso.main.processAwaitingDelegates.html">processAwaitingDelegates</a><div class="simplified-prototype" style="max-width: 69ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">processAwaitingDelegates</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Processes the awaiting delegates of an
    <a class="xref" href="kameloso.plugins.IRCPlugin.html">IRCPlugin</a>.</p></div></dd><dt><a href="kameloso.main.processAwaitingFibers.html">processAwaitingFibers</a><div class="simplified-prototype" style="max-width: 66ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">processAwaitingFibers</span>(IRCPlugin plugin, IRCEvent event)</div></dt><dd><div><p>Processes the awaiting <a class="xref" href="core.thread.fiber.Fiber.html">Fiber</a>s of an
    <a class="xref" href="kameloso.plugins.IRCPlugin.html">IRCPlugin</a>.</p></div></dd><dt><a href="kameloso.main.processDeferredActions.html">processDeferredActions</a><div class="simplified-prototype" style="max-width: 70ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">processDeferredActions</span>(Kameloso instance, IRCPlugin plugin)</div></dt><dd><div><p>Iterates through a plugin's array of <a class="xref" href="kameloso.plugins.DeferredAction.html">DeferredAction</a>s.
    Depending on what their <a class="xref" href="kameloso.plugins.DeferredAction.fiber.html">fiber</a> member
    (which is in actually a <a class="xref" href="kameloso.thread.CarryingFiber.html">CarryingFiber</a>) can be
    cast to, it prepares a payload, assigns it to the
    <a class="xref" href="kameloso.thread.CarryingFiber.html">CarryingFiber</a>, and calls it.</p></div></dd><dt><a href="kameloso.main.processLineFromServer.html">processLineFromServer</a><div class="simplified-prototype" style="max-width: 78ch;"><span class="lang-feature">auto</span>  <span class="name">processLineFromServer</span>(Kameloso instance, string raw, SysTime now)</div></dt><dd><div><p>Processes a line read from the server, constructing an
    <a class="xref" href="dialect.defs.IRCEvent.html">IRCEvent</a> and dispatches it to all plugins.</p></div></dd><dt><a href="kameloso.main.processMessages.html">processMessages</a><div class="simplified-prototype" style="max-width: 86ch;"><span class="lang-feature">auto</span>  <span class="name">processMessages</span>(Kameloso instance, SysTime now, IRCPlugin onlyThisPlugin)</div></dt><dd><div><p>Processes messages and performs action based on them.</p></div></dd><dt><a href="kameloso.main.processPendingReplays.html">processPendingReplays</a><div class="simplified-prototype" style="max-width: 69ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">processPendingReplays</span>(Kameloso instance, IRCPlugin plugin)</div></dt><dd><div><p>Takes a queue of pending <a class="xref" href="kameloso.plugins.Replay.html">Replay</a>
    objects and issues WHOIS queries for each one, unless it has already been done
    recently (within <a class="xref" href="kameloso.constants.Timeout.whoisRetry.html">Timeout.whoisRetry</a> seconds).</p></div></dd><dt><a href="kameloso.main.processReadyReplays.html">processReadyReplays</a><div class="simplified-prototype" style="max-width: 67ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">processReadyReplays</span>(Kameloso instance, IRCPlugin plugin)</div></dt><dd><div><p>Handles the queue of ready-to-replay objects, re-postprocessing events from the
    current (main loop) context, outside of any plugin.</p></div></dd><dt><a href="kameloso.main.processScheduledDelegates.html">processScheduledDelegates</a><div class="simplified-prototype" style="max-width: 72ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">processScheduledDelegates</span>(IRCPlugin plugin, long nowInHnsecs)</div></dt><dd><div><p>Processes the queued <a class="xref" href="kameloso.thread.ScheduledDelegate.html">ScheduledDelegate</a>s of an
    <a class="xref" href="kameloso.plugins.IRCPlugin.html">IRCPlugin</a>.</p></div></dd><dt><a href="kameloso.main.processScheduledFibers.html">processScheduledFibers</a><div class="simplified-prototype" style="max-width: 69ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">processScheduledFibers</span>(IRCPlugin plugin, long nowInHnsecs)</div></dt><dd><div><p>Processes the queued <a class="xref" href="kameloso.thread.ScheduledFiber.html">ScheduledFiber</a>s of an
    <a class="xref" href="kameloso.plugins.IRCPlugin.html">IRCPlugin</a>.</p></div></dd><dt><a href="kameloso.main.resetSignals.html">resetSignals</a><div class="simplified-prototype" style="max-width: 20ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">resetSignals</span>()</div></dt><dd><div><p>Resets signal handlers to the system default.</p></div></dd><dt><a href="kameloso.main.resolve.html">resolve</a><div class="simplified-prototype" style="max-width: 56ch;"><span class="lang-feature">auto</span>  <span class="name">resolve</span>(Kameloso instance, bool firstConnect)</div></dt><dd><div><p>Tries to resolve the address in
    <a class="xref" href="kameloso.kameloso.Kameloso.parser.html#server">Kameloso.parser.server</a> to IPs, by
    leveraging <a class="xref" href="kameloso.net.delegateResolve.html">delegateResolve</a>, passing it
    delegates to call to provide feedback to the user.</p></div></dd><dt><a href="kameloso.main.resolvePaths.html">resolvePaths</a><div class="simplified-prototype" style="max-width: 39ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">resolvePaths</span>(Kameloso instance)</div></dt><dd><div><p>Resolves resource directory private key/certificate file paths semi-verbosely.</p></div></dd><dt><a href="kameloso.main.run.html">run</a><div class="simplified-prototype" style="max-width: 26ch;"><span class="lang-feature">auto</span>  <span class="name">run</span>(string[] args)</div></dt><dd><div><p>Entry point of the program.</p></div></dd><dt><a href="kameloso.main.sendLines.html">sendLines</a><div class="simplified-prototype" style="max-width: 37ch;"><span class="lang-feature">auto</span>  <span class="name">sendLines</span>(Kameloso instance)</div></dt><dd><div><p>Sends strings to the server from the message buffers.</p></div></dd><dt><a href="kameloso.main.setDefaultDirectories.html">setDefaultDirectories</a><div class="simplified-prototype" style="max-width: 58ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">setDefaultDirectories</span>(CoreSettings coreSettings)</div></dt><dd><div><p>Sets default directories in the passed <a class="xref" href="kameloso.pods.CoreSettings.html">CoreSettings</a>.</p></div></dd><dt><a href="kameloso.main.setupSignals.html">setupSignals</a><div class="simplified-prototype" style="max-width: 20ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">setupSignals</span>()</div></dt><dd><div><p>Registers some process signals to redirect to our own <a class="xref" href="kameloso.main.signalHandler.html">signalHandler</a>, so we
    can (for instance) catch Ctrl+C and gracefully shut down.</p></div></dd><dt><a href="kameloso.main.signalHandler.html">signalHandler</a><div class="simplified-prototype" style="max-width: 29ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">signalHandler</span>(int sig)</div></dt><dd><div><p>Called when a signal is raised, usually <tt class="inline-code">SIGINT</tt>.</p></div></dd><dt><a href="kameloso.main.startBot.html">startBot</a><div class="simplified-prototype" style="max-width: 36ch;"><span class="lang-feature">auto</span>  <span class="name">startBot</span>(Kameloso instance)</div></dt><dd><div><p>Main connection logic.</p></div></dd><dt><a href="kameloso.main.tryConnect.html">tryConnect</a><div class="simplified-prototype" style="max-width: 38ch;"><span class="lang-feature">auto</span>  <span class="name">tryConnect</span>(Kameloso instance)</div></dt><dd><div><p>Tries to connect to the IPs in
    <a class="xref" href="kameloso.kameloso.Kameloso.conn.html#ips">Kameloso.conn.ips</a> by leveraging
    <a class="xref" href="kameloso.net.connectFiber.html">connectFiber</a>, reacting on the
    <a class="xref" href="kameloso.net.ConnectionAttempt.html">ConnectionAttempt</a>s it yields to provide feedback
    to the user.</p></div></dd><dt><a href="kameloso.main.tryGetopt.html">tryGetopt</a><div class="simplified-prototype" style="max-width: 37ch;"><span class="lang-feature">auto</span>  <span class="name">tryGetopt</span>(Kameloso instance)</div></dt><dd><div><p>Attempt handling <tt class="inline-code">getopt</tt>, wrapped in try-catch blocks.</p></div></dd><dt><a href="kameloso.main.verifySettings.html">verifySettings</a><div class="simplified-prototype" style="max-width: 42ch;"><span class="lang-feature">auto</span>  <span class="name">verifySettings</span>(Kameloso instance)</div></dt><dd><div><p>Verifies some settings and returns whether the program should continue
    executing (or whether there were errors such that we should exit).</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="manifest constant"><a class="header-anchor" href="#manifest constant">Manifest constants</a></h3><dl class="member-list native"><dt><a href="kameloso.main.gcOptions.html">gcOptions</a><div class="simplified-prototype" style="max-width: 16ch;"><span class="builtin-type">enum</span> <span class="name">gcOptions</span>;</div></dt><dd><div><p>A value line for <a class="xref" href="kameloso.main.rt_options.html">rt_options</a> to fine-tune the garbage collector.</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="static variable"><a class="header-anchor" href="#static variable">Static variables</a></h3><dl class="member-list native"><dt><a href="kameloso.main.rt_options.html">rt_options</a><div class="simplified-prototype" style="max-width: 22ch;"><tt class="highlighted"><span class="type">string</span>[]</tt> <span class="name">rt_options</span>;</div></dt><dd><div><p>Fine-tune the garbage collector.</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="variable"><a class="header-anchor" href="#variable">Variables</a></h3><dl class="member-list native"><dt><a href="kameloso.main.signalRaised.html">signalRaised</a><div class="simplified-prototype" style="max-width: 18ch;"><tt class="highlighted"><span class="type">int</span></tt> <span class="name">signalRaised</span>;</div></dt><dd><div><p>The value of the signal, when the process was sent one that meant it
        should abort. This determines the shell exit code to return.</p></div></dd></dl><div><h2 id="see-also"><a class="header-anchor" href="#see-also">See Also</a></h2><div class="documentation-comment see-also-section"><div><p><a class="xref" href="kameloso.kameloso.html">kameloso.kameloso</a>,
        <a class="xref" href="kameloso.common.html">kameloso.common</a>,
        <a class="xref" href="kameloso.config.html">kameloso.config</a></p></div></div><h2 id="meta"><a class="header-anchor" href="#meta">Meta</a></h2><div class="documentation-comment license-section other-section"><h3 id="license"><a class="header-anchor" href="#license">License</a></h3><div><p><a href="https://www.boost.org/users/license.html">Boost Software License 1.0</a></p></div></div><div class="documentation-comment copyright-section other-section"><h3 id="copyright"><a class="header-anchor" href="#copyright">Copyright</a></h3><div><p><a href="https://github.com/zorael">JR</a></p></div></div><div class="documentation-comment authors-section other-section"><h3 id="authors"><a class="header-anchor" href="#authors">Authors</a></h3><div><p><a href="https://github.com/zorael">JR</a></p></div></div></div></div>
		<div id="page-nav"><a class="parent" href="kameloso.html">kameloso</a> 
		<span class="type-separator">modules</span><ul><li><a class="module" href="kameloso.common.html">common</a></li><li><a class="module" href="kameloso.config.html">config</a></li><li><a class="module" href="kameloso.configreader.html">configreader</a></li><li><a class="module" href="kameloso.constants.html">constants</a></li><li><a class="module" href="kameloso.entrypoint.html">entrypoint</a></li><li><a class="module" href="kameloso.irccolours.html">irccolours</a></li><li><a class="module" href="kameloso.kameloso.html">kameloso</a></li><li><a class="module" href="kameloso.logger.html">logger</a></li><li><a class="module current" href="kameloso.main.html">main</a></li><li><a class="module" href="kameloso.messaging.html">messaging</a></li><li><a class="module" href="kameloso.misc.html">misc</a></li><li><a class="module" href="kameloso.net.html">net</a></li><li><a class="module" href="kameloso.platform.html">platform</a></li><li><a class="module" href="kameloso.plugins.html">plugins</a></li><li><a class="module" href="kameloso.pods.html">pods</a></li><li><a class="module" href="kameloso.prettyprint.html">prettyprint</a></li><li><a class="module" href="kameloso.semver.html">semver</a></li><li><a class="module" href="kameloso.ssldownloads.html">ssldownloads</a></li><li><a class="module" href="kameloso.string.html">string</a></li><li><a class="module" href="kameloso.tables.html">tables</a></li><li><a class="module" href="kameloso.terminal.html">terminal</a></li><li><a class="module" href="kameloso.thread.html">thread</a></li><li><a class="module" href="kameloso.time.html">time</a></li><li><a class="module" href="kameloso.traits.html">traits</a></li></ul></div>
	</div>
	<div id="page-footer">Page generated by <a href="https://github.com/adamdruppe/adrdox">adrdox</a></div>
</body>
</html>