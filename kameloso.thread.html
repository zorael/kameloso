<!DOCTYPE html>
<html lang="en">
<head>
        <title>kameloso.thread (kameloso.thread)</title>
	<meta charset="utf-8" />
	<meta content="width=device-width, initial-scale=1" name="viewport" />
        <link href="style.css" rel="stylesheet" />
        <script src="script.js" type="text/javascript"></script>

	
	<link href="search-results.html" rel="prefetch" />
</head>
<body>
	<div id="page-header">
		<div id="logotype">
		<span>kameloso IRC bot</span>
		<nav>
			<a href="http://dlang.org/">Dlang.org</a>
		</nav>
		</div>

		<form action="search-docs.html" id="search">
			<input name="searchTerm" placeholder="Find a symbol name..." type="search" />
			<input type="submit" value="Go" />
		</form>
	</div>
	<div id="page-body">
		<div id="page-content">
		<h1>kameloso.thread</h1><div class="breadcrumbs"><a class="breadcrumb" href="kameloso.html">kameloso</a> </div><div><div class="documentation-comment synopsis"><div><p>Structures and functions related to message passing, threads and
    <a class="xref" href="core.thread.fiber.Fiber.html">Fiber</a>s.</p></div></div></div><div class="annotated-prototype"></div><h2 id="members"><a class="header-anchor" href="#members">Members</a></h2><h3 class="member-list-header hide-from-toc" id="class"><a class="header-anchor" href="#class">Classes</a></h3><dl class="member-list native"><dt><a href="kameloso.thread.Boxed.html">Boxed</a><div class="simplified-prototype" style="max-width: 15ch;"><span class="builtin-type">class</span> <span class="name">Boxed</span><span class="template-params">(T)</span></div></dt><dd><div><p>A payload of type <tt class="inline-code">T</tt> wrapped in a class implementing the <a class="xref" href="kameloso.thread.Sendable.html">Sendable</a> interface.
    Used to box values for sending via the message bus.</p></div></dd><dt><a href="kameloso.thread.CarryingFiber.html">CarryingFiber</a><div class="simplified-prototype" style="max-width: 24ch;"><span class="builtin-type">class</span> <span class="name">CarryingFiber</span><span class="template-params">(T)</span></div></dt><dd><div><p>A <a class="xref" href="core.thread.fiber.Fiber.html">Fiber</a> carrying a payload of type <tt class="inline-code">T</tt>, along with
    some metadata.</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="function"><a class="header-anchor" href="#function">Functions</a></h3><dl class="member-list native"><dt><a href="kameloso.thread.boxed.html">boxed</a><div class="simplified-prototype" style="max-width: 36ch;"><tt class="highlighted"><span class="kwrd">shared</span>(<span class="hid">Sendable</span>)</tt> <span class="name">boxed</span>(T payload)</div></dt><dd><div><p>Constructor function to create a <tt class="inline-code">shared</tt> <a class="xref" href="kameloso.thread.Boxed.html">Boxed</a> with an unqualified
    template type.</p></div></dd><dt><a href="kameloso.thread.carryingFiber.html">carryingFiber</a><div class="simplified-prototype" style="max-width: 78ch;"><span class="lang-feature">auto</span>  <span class="name">carryingFiber</span>(FnOrDg fnOrDg, T payload, Args args, string caller)</div></dt><dd><div><p>Convenience function creating a new <a class="xref" href="kameloso.thread.CarryingFiber.html">CarryingFiber</a> while inferring the payload
    type <tt class="inline-code">T</tt> from the passed <tt class="inline-code">payload</tt> argument.</p></div></dd><dt><a href="kameloso.thread.getQuitMessage.html">getQuitMessage</a><div class="simplified-prototype" style="max-width: 45ch;"><span class="lang-feature">auto</span>  <span class="name">getQuitMessage</span>(IRCPlugin[] plugins)</div></dt><dd><div><p>Iterates the <a class="xref" href="kameloso.plugins.IRCPluginState.messages.html">messages</a> and
    <a class="xref" href="kameloso.plugins.IRCPluginState.priorityMessages.html">priorityMessages</a> arrays
    of each plugin. If a <a class="xref" href="kameloso.thread.ThreadMessage.MessageType.html#quit">quit</a>
    message is found, its content is returned.</p></div></dd><dt><a href="kameloso.thread.interruptibleSleep.html">interruptibleSleep</a><div class="simplified-prototype" style="max-width: 55ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">interruptibleSleep</span>(Duration dur, bool* abort)</div></dt><dd><div><p>Sleep in small periods, checking the passed <tt class="inline-code">abort</tt> flag in between to see
    if we should break and return.</p></div></dd><dt><a href="kameloso.thread.pthread_setname_np.html">pthread_setname_np</a><div class="simplified-prototype" style="max-width: 46ch;"><tt class="highlighted"><span class="type">int</span></tt> <span class="name">pthread_setname_np</span>(pthread_t , char* )</div></dt><dd><div><p>Prototype to allow linking to <tt class="inline-code">pthread</tt>'s function for naming threads.</p></div></dd><dt><a href="kameloso.thread.setThreadName.html">setThreadName</a><div class="simplified-prototype" style="max-width: 34ch;"><tt class="highlighted"><span class="type">void</span></tt> <span class="name">setThreadName</span>(string name)</div></dt><dd><div><p>Sets the thread name of the current thread, so they will show up named
        in process managers (like <tt class="inline-code">top</tt>).</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="interface"><a class="header-anchor" href="#interface">Interfaces</a></h3><dl class="member-list native"><dt><a href="kameloso.thread.Sendable.html">Sendable</a><div class="simplified-prototype" style="max-width: 19ch;"><span class="builtin-type">interface</span> <span class="name">Sendable</span></div></dt><dd><div><p>Interface for a message sendable through the message bus.</p></div></dd></dl><h3 class="member-list-header hide-from-toc" id="struct"><a class="header-anchor" href="#struct">Structs</a></h3><dl class="member-list native"><dt><a href="kameloso.thread.ScheduledDelegate.html">ScheduledDelegate</a><div class="simplified-prototype" style="max-width: 26ch;"><span class="builtin-type">struct</span> <span class="name">ScheduledDelegate</span></div></dt><dd><div><p>A delegate paired with a <tt class="inline-code">long</tt> UNIX timestamp.</p></div></dd><dt><a href="kameloso.thread.ScheduledFiber.html">ScheduledFiber</a><div class="simplified-prototype" style="max-width: 23ch;"><span class="builtin-type">struct</span> <span class="name">ScheduledFiber</span></div></dt><dd><div><p>A <a class="xref" href="core.thread.fiber.Fiber.html">Fiber</a> paired with a <tt class="inline-code">long</tt> UNIX timestamp.</p></div></dd><dt><a href="kameloso.thread.ThreadMessage.html">ThreadMessage</a><div class="simplified-prototype" style="max-width: 22ch;"><span class="builtin-type">struct</span> <span class="name">ThreadMessage</span></div></dt><dd><div><p>Collection of static functions used to construct thread messages, for passing
    information of different kinds yet still as one type, to be able to store them
    in arrays for later processing.</p></div></dd></dl><div><h2 id="examples"><a class="header-anchor" href="#examples">Examples</a></h2><div class="documentation-comment"><div><pre class="d_code highlighted"><span class="hid">plugin</span>.<span class="hid">state</span>.<span class="hid">messages</span> ~= <span class="hid">ThreadMessage</span>.<span class="hid">sendline</span>(<span class="str">&quot;Message to send to server&quot;</span>);
<span class="hid">plugin</span>.<span class="hid">state</span>.<span class="hid">priorityMessages</span> ~= <span class="hid">ThreadMessage</span>.<span class="hid">pong</span>(<span class="str">&quot;irc.libera.chat&quot;</span>);
<span class="hid">plugin</span>.<span class="hid">state</span>.<span class="hid">messages</span> ~= <span class="hid">ThreadMessage</span>.<span class="hid">askToWriteln</span>(<span class="str">&quot;writeln this for me please&quot;</span>);
<span class="hid">plugin</span>.<span class="hid">state</span>.<span class="hid">messages</span> ~= <span class="hid">ThreadMessage</span>.<span class="hid">busMessage</span>(<span class="str">&quot;header&quot;</span>, <span class="hid">boxed</span>(<span class="str">&quot;payload&quot;</span>));

<span class="kwrd">auto</span> <span class="hid">fiber</span> = <span class="kwrd">new</span> <span class="hid">CarryingFiber</span>!<span class="type">string</span>(&amp;<span class="hid">someDelegate</span>, <span class="hid">BufferSize</span>.<span class="hid">fiberStack</span>);
<span class="hid">fiber</span>.<span class="hid">payload</span> = <span class="str">&quot;This string is carried by the fiber and can be accessed from within it&quot;</span>;
<span class="hid">fiber</span>.<span class="hid">call</span>();
<span class="hid">fiber</span>.<span class="hid">payload</span> = <span class="str">&quot;You can change it in between calls to pass information to it&quot;</span>;
<span class="hid">fiber</span>.<span class="hid">call</span>();

<span class="com">// As such we can make fibers act like they're taking new arguments each call</span>
<span class="kwrd">auto</span> <span class="hid">fiber2</span> = <span class="kwrd">new</span> <span class="hid">CarryingFiber</span>!<span class="hid">IRCEvent</span>(&amp;<span class="hid">otherDelegate</span>, <span class="hid">BufferSize</span>.<span class="hid">fiberStack</span>);
<span class="hid">fiber2</span>.<span class="hid">payload</span> = <span class="hid">newIncomingIRCEvent</span>;
<span class="hid">fiber2</span>.<span class="hid">call</span>();
<span class="com">// [...]</span>
<span class="hid">fiber2</span>.<span class="hid">payload</span> = <span class="hid">evenNewerIncomingIRCEvent</span>;
<span class="hid">fiber2</span>.<span class="hid">call</span>();</pre></div></div><h2 id="see-also"><a class="header-anchor" href="#see-also">See Also</a></h2><div class="documentation-comment see-also-section"><div><p><a class="xref" href="kameloso.messaging.html">kameloso.messaging</a></p></div></div><h2 id="meta"><a class="header-anchor" href="#meta">Meta</a></h2><div class="documentation-comment license-section other-section"><h3 id="license"><a class="header-anchor" href="#license">License</a></h3><div><p><a href="https://www.boost.org/users/license.html">Boost Software License 1.0</a></p></div></div><div class="documentation-comment copyright-section other-section"><h3 id="copyright"><a class="header-anchor" href="#copyright">Copyright</a></h3><div><p><a href="https://github.com/zorael">JR</a></p></div></div><div class="documentation-comment authors-section other-section"><h3 id="authors"><a class="header-anchor" href="#authors">Authors</a></h3><div><p><a href="https://github.com/zorael">JR</a></p></div></div></div></div>
		<div id="page-nav"><a class="parent" href="kameloso.html">kameloso</a> 
		<span class="type-separator">modules</span><ul><li><a class="module" href="kameloso.common.html">common</a></li><li><a class="module" href="kameloso.config.html">config</a></li><li><a class="module" href="kameloso.configreader.html">configreader</a></li><li><a class="module" href="kameloso.constants.html">constants</a></li><li><a class="module" href="kameloso.entrypoint.html">entrypoint</a></li><li><a class="module" href="kameloso.irccolours.html">irccolours</a></li><li><a class="module" href="kameloso.kameloso.html">kameloso</a></li><li><a class="module" href="kameloso.logger.html">logger</a></li><li><a class="module" href="kameloso.main.html">main</a></li><li><a class="module" href="kameloso.messaging.html">messaging</a></li><li><a class="module" href="kameloso.misc.html">misc</a></li><li><a class="module" href="kameloso.net.html">net</a></li><li><a class="module" href="kameloso.platform.html">platform</a></li><li><a class="module" href="kameloso.plugins.html">plugins</a></li><li><a class="module" href="kameloso.pods.html">pods</a></li><li><a class="module" href="kameloso.prettyprint.html">prettyprint</a></li><li><a class="module" href="kameloso.semver.html">semver</a></li><li><a class="module" href="kameloso.ssldownloads.html">ssldownloads</a></li><li><a class="module" href="kameloso.string.html">string</a></li><li><a class="module" href="kameloso.tables.html">tables</a></li><li><a class="module" href="kameloso.terminal.html">terminal</a></li><li><a class="module current" href="kameloso.thread.html">thread</a></li><li><a class="module" href="kameloso.time.html">time</a></li><li><a class="module" href="kameloso.traits.html">traits</a></li></ul></div>
	</div>
	<div id="page-footer">Page generated by <a href="https://github.com/adamdruppe/adrdox">adrdox</a></div>
</body>
</html>